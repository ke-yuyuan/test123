```mermaid
flowchart TD
    A[启动节点] --> B[等待 MAVROS 连接 & GPS 有效]
    B --> C[记录 Home 点经纬度与AMSL]
    C --> D[发送初始位置心跳 (100次)]
    D --> E[等待解锁 & OFFBOARD]
    E --> F[起飞到 10 m 悬停]
    F --> G[飞往 A 点(固定坐标)]
    G --> H[悬停 5 s]
    H --> I[飞往 B 点(固定坐标)]
    I --> J[悬停 5 s]
    J --> K[接收平台 RTK 经纬度]
    K --> L[飞往 平台上空(保持 10 m)]
    L --> M{水平误差 < 0.2 m<br/>连续 ≥ 1 s?}
    M -- 否 --> L
    M -- 是 --> N[匀速下降 v_z = -0.3 m/s]
    N --> O{下降中水平误差 > 0.2 m<br/>连续 ≥ 0.5 s?}
    O -- 是 --> L
    O -- 否 --> P{高度 < 0.3 m?}
    P -- 否 --> N
    P -- 是 --> Q[切换 AUTO.LAND]
    Q --> R{落地完成<br/>或超时?}
    R -- 否 --> Q
    R -- 是 --> S[关桨 Disarm]
    S --> T[保存 CSV 日志并结束]
```

